<!DOCTYPE html>
<html>

<head>
    <link href="../node_modules/pulsar-common-css/dist/styles.css" rel="stylesheet" />
    <script src="../node_modules/angular/angular.js"></script>
    <script src="../node_modules/angular-cookies/angular-cookies.js"></script>
    <script src="../node_modules/angular-translate/dist/angular-translate.js"></script>
    <script type="text/javascript" src="../dist/akamai-components.js"></script>

    <script>
        var app = angular.module('i18nDemo3', ['akamai.components.i18n', 'ngCookies']);

        app.controller('TranslationPageController', ['$scope', '$cookies', 'translate', '$rootScope', '$filter', function($scope, $cookies, translate, $rootScope, $filter) {
            $rootScope.$on('$translateChangeEnd', function() {

                // we would add more locales, but we only have 2 files for the component locales right now
                $scope.locales = ['en_US', 'de_DE'];

                $scope.selected = 'en_US';
                if($cookies.AKALOCALE) {
                  $scope.selected = atob($cookies.AKALOCALE);
                }

                $scope.changeLocale = changeLocale;

                console.log(translate.sync('reseller-tools.note'));
                console.log(translate.sync('components.menu-button.label'));

                console.log($filter('akamTranslate')('components.notifications.success'));
                console.log($filter('akamTranslate')('recurring-report.activate.modal.message'));
            });

            function changeLocale() {
              document.cookie = 'AKALOCALE='+btoa($scope.selected);
              window.location.reload();
            }
        }]);
    </script>

    <body ng-app="i18nDemo3" ng-controller="TranslationPageController" class="common-css luna" translate-cloak>
        <div class="container">
            <div class="page-header">
                <h1>i18n Example</h1>
            </div>

            <p>
                <label>Change Locale</label>
                <select ng-options="locale for locale in locales" ng-model="selected" ng-change="changeLocale()"></select>
            </p>

            <div>
                <h2>1. Check with console for javascript translations using translate service</h2>
            </div>
            <br><br>

            <div>
                <h2>2. Display app and component translated text using directive</h2>
                <div>
                    <span akam-translate="reseller-tools.note"></span>
                    <span><b>(key/value obtained from app locale json file)</b></span>
                </div>
                <div>
                    <span akam-translate="components.notifications.success"></span>
                    <span><b>(key/value obtained from component locale json file)</b></span>
                </div>
            </div>
            <br><br>

            <div>
                <h2>3. Display app and component translated text using filter</h2>
                <div>
                    <span>{{"reseller-tools.note" | akamTranslate}}</span>
                    <span><b>(key/value obtained from app locale json file)</b></span>
                </div>
                <div>
                    <span>{{"components.notifications.success" | akamTranslate}}</span>
                    <span><b>(key/value obtained from component locale json file)</b></span>
                </div>
                <div>
                    <h4>Filter used in placeholder</h4>
                    <input type="text" placeholder='{{"contractselector.filter.products" | akamTranslate}}'/>
                </div>
            </div>
        </div>
    </body>

</html>
