<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Akamai Component Examples - i18N</title>
        <link rel="stylesheet" href="../dist/akamai-core.css">
    </head>
    <body ng-app="i18nDemo3" ng-controller="TranslationPageController" class="common-css luna" translate-cloak>
        <div class="container">
            <h1>i18N Component Example</h1>
            <br/>
        </div>
        <div class="container">
            <p>
                <label class="label">Select Locale:</label>
                <select ng-options="locale for locale in locales" ng-model="selected" ng-change="changeLocale()"></select>
            </p>
            <br />
            <div>
                <label class="label">Directive Examples:</label>
                <h3>Translated Text from Application Locale JSON file</h3>
                <div>
                    <ul>
                        <li akam-translate="reseller-tools.note"></li>
                    </ul>
                </div>
            </div>
            <br />
            <div>
                <h3>Translated Text from Component Locale JSON file</h3>
                <div>
                    <ul>
                        <li akam-translate="components.notifications.success"></li>
                    </ul>
                </div>
            </div>
            <br />
             <div>
                <label class="label">Filter Examples:</label>
                <h3>Translated Text from Application Locale JSON file</h3>
                <div>
                    <ul>
                        <li><span>{{"reseller-tools.note" | akamTranslate}}</span></li>
                    </ul>
                </div>
            </div>
            <br />
            <div>
                <h3>Translated Text from Component Locale JSON file</h3>
                <div>
                    <ul>
                        <li><span>{{"components.notifications.success" | akamTranslate}}</span></li>
                    </ul>
                </div>
            </div>
            <br />
            <div>
                <h3>Translated Placeholder Text from Application Locale JSON file</h3>
                <div>
                    <ul>
                        <li><input type="text" placeholder='{{"contractselector.filter.products" | akamTranslate}}'/></li>
                    </ul>
                </div>
            </div>
            <br />
            <div>
                <label class="label">Using Filter on Dates | Currencies | Numbers:</label>
                <h3>Dates:</h3>
                <br />
                <ul>
                    <li>{{1288323623006 | date:'medium':'UTC'}} </li>
                    <li>{{1288323623006 | date:'yyyy-MM-dd HH:mm:ss':'UTC'}}</li>
                    <li>{{1288323623006 | date:'MM/dd/yyyy @ h:mma':'UTC'}}</li>
                </ul>                
            </div><br />
            <div>
                <h3>Currencies:</h3>
                <br />
                <ul>
                    <li>{{ 1000000 | currency }}</li>
                    <li>Force USD:  {{ 1000000 | currency:"USD$"}}</li>
                </ul>
            </div><br />
            <div>
                <h3>Numbers:</h3>
                <br />
                <ul>
                    <li>{{1234.56789 | number}}</li>
                    <li>{{1234.56789 | number:0}}</li>
                    <li>{{-1234.56789 | number:4}}</li>
                </ul>
            </div><br />
            <div>
                <label class=label>Check browser console for Javascript translations examples using the translate service.</label>
            </div>
        </div>
        <script type="text/javascript" src="../dist/akamai-core.js"></script>
        <script>
            var app = angular.module('i18nDemo3', ['akamai.components.i18n', 'ngCookies']);
            
            // Override the location of the Component and Application locale files
            app.config(function(i18nTokenProvider) {
                i18nTokenProvider.setComponentLocalePath("/libs/akamai-components/0.5.0/locales/");
                i18nTokenProvider.setAppLocalePath("/apps/appname/locales/");
            });

            app.controller('TranslationPageController', ['i18nToken', '$scope', '$cookies', 'translate', '$rootScope', '$filter', '$log',
                            function(i18nToken, $scope, $cookies, translate, $rootScope, $filter, $log) {
                $rootScope.$on('$translateChangeEnd', function() {
                    // List of locales to populate the locale selection dropdown. Note that not all of these exist
                    $scope.locales = ['en_US', 'en_US_ATT', 'de_DE', 'en_LOLCATS', 'es_ES', 'es_LA',
                                      'fr_FR', 'it_IT', 'ja_JP', 'ko_KR', 'pt_BR', 'zh_CN', 'zh_TW'];

                    $scope.selected = 'en_US';

                    // Check to see if the AKALOCALE cookie is used
                    if($cookies.AKALOCALE) {
                        $scope.selected = atob($cookies.AKALOCALE);
                    }
                    
                    $scope.changeLocale = changeLocale;
            
                    $log.log(translate.sync('reseller-tools.note'));
                    $log.log(translate.sync('components.menu-button.label'));
                    $log.log($filter('akamTranslate')('components.notifications.success'));
                    $log.log($filter('akamTranslate')('recurring-report.activate.modal.message'));              
                    $log.log('compURLs ' + i18nToken.getUrls());
                    $log.log('appPath ' + i18nToken.getCurrentLocale());
                });

                // Reload the page when the locale is changed.  This will force the lookup of the keys again.
                function changeLocale() {
                    document.cookie = 'AKALOCALE='+btoa($scope.selected);
                    window.location.reload();
                }
                
            }]);
    </script>
    </body>
</html>