<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <titles>Akamai Components Examples - Tree View</titles>
        <link rel="stylesheet" href="../dist/akamai-core.css">
    </head>
    <body class="common-css luna" ng-app="example" ng-strict-di ng-controller="ExampleController as vm">
        <div class="container" >
            <div class="page-header">
                <h1>Tree View Component Examples</h1>
            </div>
            <h2>Tree View Example - Hardcoded Data</h2>
            <br />
            <span>Example Data Layout:<br />
                Expand Development to see a list of tree items (time delay of 2 seconds)
                <br />
                Under Development choose Hallie Jordan
                <br />
                Under Hallie Jordan choose Dinah Short (time delay of 5 seconds)
                <br />
                Sam Curry = Failed to get data<br />
                All other items do not have child items<br />
            </span>
            <br />
            <div style="max-width:225px;">
                <akam-tree-view akam-standalone items="vm.contextData" parent-property="parents" children-property="childs" current-property="currents" text-property="titles" 
                on-change="vm.triggerChange(item)"> </akam-tree-view>
            </div>
            <br />
            <br />
            <h2>Tree View Example - JSON Data</h2>
             <span>NOTE: No child data nodes exist under the initial list of items in the tree<br />
            </span>
             <div style="max-width:225px;">
                <akam-tree-view akam-standalone items="vm.jsonFromHttpGet" parent-property="parents" children-property="childs" current-property="currents" text-property="titles" 
                on-change="vm.triggerChange2(item)"> </akam-tree-view>
            </div>
        </div>
        <script src="../dist/akamai-core.js"></script>
        <script>
            var exampleController = function($scope, $log, $q, $timeout, $http) {
                
                var vm = this;
                
                // Load data from a json file to test out HTTP GET functionality
                vm.jsonFromHttpGet = $http.get('json/tree-view-data.json');
                
                vm.triggerChange2 = function(clickedObj){
                    $log.log("clicked object " + clickedObj.titles);
                };
                
                vm.triggerChange = function(clickedObj){
                    console.log("HEY I MADE IT HERE");
                    console.log(clickedObj);
                    if(clickedObj.titles === 'Hallie Jordan'){
                        vm.contextData = {
                            parents:{titles:"Development"},
                            childs : [
                                {titles:"Dinah Short"},
                                {titles:"Helena Sky"},
                                {titles:"Selina Crow"}
                            ]
                        }
                    } else if (clickedObj.titles === 'Dinah Short') {
                        var def = $q.defer();
                        $timeout(function(){
                            def.resolve({
                                parents:{titles:"Hallie Jordan"},
                                childs : [
                                    {titles:"Speedy McQueen"},
                                    {titles:"Mia Deardenton"},
                                    {titles:"Royce Brown"},
                                    {titles:"Shane McDowell"}
                            ]});
                        }, 5000);
                        return def.promise;
                    } else if (clickedObj.titles === 'Sam Curry') {
                        var def = $q.defer();
                        vm.contextData = def.promise;
                        $timeout(function(){
                            def.reject();
                        }, 200);
                    } else if (clickedObj.titles === 'Kent Clarkson') {
                        return $http.get('json/small-tree-view-data.json');
                    }  else if (clickedObj.titles === 'Bruce Hopper') {
                        var def = $q.defer();
                        vm.contextData = {
                            parents:{titles:"Development"},
                            childs : []
                        }
                    } else if (clickedObj.titles === 'Development') {
                        var def = $q.defer();
                        vm.contextData = def.promise;
                        $timeout(function(){
                            def.resolve({
                                parents:{titles:"Employees"},
                                childs:[
                                    {"titles": "Bruce Hopper"},
                                    {titles: "Kent Clarkson"},
                                    {titles: "Hallie Jordan"},
                                    {titles: "Barry Jones"},
                                    {titles: "Sam Curry"},
                                    {titles: "Michael Prince"},
                                    {titles: "Hubert Blaine Wolfeschlegelsteinhausenbergerdorff" }
                                ]
                            });
                        }, 2000);
                    } else if (clickedObj.titles === 'Employees') {
                        vm.contextData = {
                            parents : null,
                            childs: [
                                {titles: "Development"},
                                {titles: "Quality Assurance"},
                                {titles: "Dev. Ops"},
                                {titles: "UXD"},
                                {titles: "Sales"},
                                {titles: "Help Desk"},
                                {titles: "Network Operations Command Center"}
                            ]
                        }
                    } else {
                        vm.contextData = {
                            childs: null
                        }
                    }
                }
                vm.contextData = {
                    parents:{titles: "Employees"},
                    currents:{titles: "Development"},
                    childs:[
                        {"titles": "Bruce Hopper"},
                        {"titles": "Kent Clarkson"},
                        {"titles": "Hallie Jordan"},
                        {"titles": "Barry Jones"},
                        {"titles": "Sam Curry"},
                        {"titles": "Michael Prince"},
                        {"titles": "Hubert Blaine Wolfeschlegelsteinhausenbergerdorff" },
                    ]
                }
            };
            exampleController.$inject = ['$scope', '$log', '$q', '$timeout', '$http', '$httpBackend'];
            angular.module('example', ['akamai.components.tree-view'])
            

            .controller('ExampleController', exampleController);
        </script>
    </body>
</html>