<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Akamai Component Examples - Auto Complete</title>
  <link rel="stylesheet" href="../dist/akamai-core.css">
</head>

<body class="common-css luna" ng-app="autocompleteApp" ng-strict-di ng-controller="AutocompleteAppController as vm">
  <br/>
  <h2>Auto Complete Component Example</h2>
  <hr>
  <div>
    <h4>Display Auto Complete with minimum attributes and string list</h4>
    <akam-autocomplete items="vm.states" ng-model="vm.selectedState" placeholder="Enter state" on-search="vm.asyncSearchMatchesWithString(term)"></akam-autocomplete>
  </div>
    <br/>
  <div>
    <h4>Display Auto Complete with customizabe content - 1 and search minimum of 2 characters</h4>
    <akam-autocomplete items="vm.statesWithFlags" ng-model="vm.selectedStateWithFlag" text-property="name" content-property="stateFlags" minimum-search="2" placeholder="Search state with flag" on-search="vm.asyncSearchMatches1(term)">
      <akam-autocomplete-item>
        <a>
          <img ng-src="http://upload.wikimedia.org/wikipedia/commons/thumb/{{match.model.flag}}" width="16">
          <span bind-html-unsafe="match.label | highlight:query"></span>
        </a>
      </akam-autocomplete-item>
    </akam-autocomplete>
  </div>
    <br/>
  <div>
    <h4>Display Auto Complete with customizabe content - 2 and search minimum of 3 characters</h4>
    <akam-autocomplete items="vm.items" ng-model="vm.selectedName" text-property="name" content-property="employeeNames" minimum-search="3" placeholder="Enter name" on-select="vm.selectCallback(item)" on-search="vm.asyncSearchMatches2(term)">
      <akam-autocomplete-item>
        <div class="row">
          <div class="col-xs-5"><i class="fa fa-user"></i>
            <span bind-html-unsafe="match.label | highlight:query"></span>
          </div>
          <div class="col-xs-7 text-right text-muted">
            <span bind-html-unsafe="match.model.email | highlight:query"></span>
          </div>
          <div class="col-xs-12">
            Joined: <span class="text-muted" bind-html-unsafe="match.model.joined" </span>
          </div>
        </div>
      </akam-autocomplete-item>
    </akam-autocomplete>
  </div>
  <script src="../dist/akamai-core.js"></script>
  <script>
  angular.module('autocompleteApp', ['akamai.components.autocomplete'])
    .controller('AutocompleteAppController', AutocompleteAppController);

  AutocompleteAppController.$inject = ['$log', '$q', '$http', '$timeout'];

  function AutocompleteAppController($log, $q, $http, $timeout) {

    var statesWithFlags = [{
      'name': 'Alabama',
      'flag': '5/5c/Flag_of_Alabama.svg/45px-Flag_of_Alabama.svg.png'
    }, {
      'name': 'Alaska',
      'flag': 'e/e6/Flag_of_Alaska.svg/43px-Flag_of_Alaska.svg.png'
    }, {
      'name': 'Arizona',
      'flag': '9/9d/Flag_of_Arizona.svg/45px-Flag_of_Arizona.svg.png'
    }, {
      'name': 'Arkansas',
      'flag': '9/9d/Flag_of_Arkansas.svg/45px-Flag_of_Arkansas.svg.png'
    }, {
      'name': 'California',
      'flag': '0/01/Flag_of_California.svg/45px-Flag_of_California.svg.png'
    }, {
      'name': 'Colorado',
      'flag': '4/46/Flag_of_Colorado.svg/45px-Flag_of_Colorado.svg.png'
    }, {
      'name': 'Connecticut',
      'flag': '9/96/Flag_of_Connecticut.svg/39px-Flag_of_Connecticut.svg.png'
    }, {
      'name': 'Delaware',
      'flag': 'c/c6/Flag_of_Delaware.svg/45px-Flag_of_Delaware.svg.png'
    }, {
      'name': 'Florida',
      'flag': 'f/f7/Flag_of_Florida.svg/45px-Flag_of_Florida.svg.png'
    }, {
      'name': 'Georgia',
      'flag': '5/54/Flag_of_Georgia_%28U.S._state%29.svg/46px-Flag_of_Georgia_%28U.S._state%29.svg.png'
    }, {
      'name': 'Hawaii',
      'flag': 'e/ef/Flag_of_Hawaii.svg/46px-Flag_of_Hawaii.svg.png'
    }, {
      'name': 'Idaho',
      'flag': 'a/a4/Flag_of_Idaho.svg/38px-Flag_of_Idaho.svg.png'
    }, {
      'name': 'Illinois',
      'flag': '0/01/Flag_of_Illinois.svg/46px-Flag_of_Illinois.svg.png'
    }, {
      'name': 'Indiana',
      'flag': 'a/ac/Flag_of_Indiana.svg/45px-Flag_of_Indiana.svg.png'
    }, {
      'name': 'Iowa',
      'flag': 'a/aa/Flag_of_Iowa.svg/44px-Flag_of_Iowa.svg.png'
    }, {
      'name': 'Kansas',
      'flag': 'd/da/Flag_of_Kansas.svg/46px-Flag_of_Kansas.svg.png'
    }, {
      'name': 'Kentucky',
      'flag': '8/8d/Flag_of_Kentucky.svg/46px-Flag_of_Kentucky.svg.png'
    }, {
      'name': 'Louisiana',
      'flag': 'e/e0/Flag_of_Louisiana.svg/46px-Flag_of_Louisiana.svg.png'
    }, {
      'name': 'Maine',
      'flag': '3/35/Flag_of_Maine.svg/45px-Flag_of_Maine.svg.png'
    }, {
      'name': 'Maryland',
      'flag': 'a/a0/Flag_of_Maryland.svg/45px-Flag_of_Maryland.svg.png'
    }, {
      'name': 'Massachusetts',
      'flag': 'f/f2/Flag_of_Massachusetts.svg/46px-Flag_of_Massachusetts.svg.png'
    }, {
      'name': 'Michigan',
      'flag': 'b/b5/Flag_of_Michigan.svg/45px-Flag_of_Michigan.svg.png'
    }, {
      'name': 'Minnesota',
      'flag': 'b/b9/Flag_of_Minnesota.svg/46px-Flag_of_Minnesota.svg.png'
    }, {
      'name': 'Mississippi',
      'flag': '4/42/Flag_of_Mississippi.svg/45px-Flag_of_Mississippi.svg.png'
    }, {
      'name': 'Missouri',
      'flag': '5/5a/Flag_of_Missouri.svg/46px-Flag_of_Missouri.svg.png'
    }, {
      'name': 'Montana',
      'flag': 'c/cb/Flag_of_Montana.svg/45px-Flag_of_Montana.svg.png'
    }, {
      'name': 'Nebraska',
      'flag': '4/4d/Flag_of_Nebraska.svg/46px-Flag_of_Nebraska.svg.png'
    }, {
      'name': 'Nevada',
      'flag': 'f/f1/Flag_of_Nevada.svg/45px-Flag_of_Nevada.svg.png'
    }, {
      'name': 'New Hampshire',
      'flag': '2/28/Flag_of_New_Hampshire.svg/45px-Flag_of_New_Hampshire.svg.png'
    }, {
      'name': 'New Jersey',
      'flag': '9/92/Flag_of_New_Jersey.svg/45px-Flag_of_New_Jersey.svg.png'
    }, {
      'name': 'New Mexico',
      'flag': 'c/c3/Flag_of_New_Mexico.svg/45px-Flag_of_New_Mexico.svg.png'
    }, {
      'name': 'New York',
      'flag': '1/1a/Flag_of_New_York.svg/46px-Flag_of_New_York.svg.png'
    }, {
      'name': 'North Carolina',
      'flag': 'b/bb/Flag_of_North_Carolina.svg/45px-Flag_of_North_Carolina.svg.png'
    }, {
      'name': 'North Dakota',
      'flag': 'e/ee/Flag_of_North_Dakota.svg/38px-Flag_of_North_Dakota.svg.png'
    }, {
      'name': 'Ohio',
      'flag': '4/4c/Flag_of_Ohio.svg/46px-Flag_of_Ohio.svg.png'
    }, {
      'name': 'Oklahoma',
      'flag': '6/6e/Flag_of_Oklahoma.svg/45px-Flag_of_Oklahoma.svg.png'
    }, {
      'name': 'Oregon',
      'flag': 'b/b9/Flag_of_Oregon.svg/46px-Flag_of_Oregon.svg.png'
    }, {
      'name': 'Pennsylvania',
      'flag': 'f/f7/Flag_of_Pennsylvania.svg/45px-Flag_of_Pennsylvania.svg.png'
    }, {
      'name': 'Rhode Island',
      'flag': 'f/f3/Flag_of_Rhode_Island.svg/32px-Flag_of_Rhode_Island.svg.png'
    }, {
      'name': 'South Carolina',
      'flag': '6/69/Flag_of_South_Carolina.svg/45px-Flag_of_South_Carolina.svg.png'
    }, {
      'name': 'South Dakota',
      'flag': '1/1a/Flag_of_South_Dakota.svg/46px-Flag_of_South_Dakota.svg.png'
    }, {
      'name': 'Tennessee',
      'flag': '9/9e/Flag_of_Tennessee.svg/46px-Flag_of_Tennessee.svg.png'
    }, {
      'name': 'Texas',
      'flag': 'f/f7/Flag_of_Texas.svg/45px-Flag_of_Texas.svg.png'
    }, {
      'name': 'Utah',
      'flag': 'f/f6/Flag_of_Utah.svg/45px-Flag_of_Utah.svg.png'
    }, {
      'name': 'Vermont',
      'flag': '4/49/Flag_of_Vermont.svg/46px-Flag_of_Vermont.svg.png'
    }, {
      'name': 'Virginia',
      'flag': '4/47/Flag_of_Virginia.svg/44px-Flag_of_Virginia.svg.png'
    }, {
      'name': 'Washington',
      'flag': '5/54/Flag_of_Washington.svg/46px-Flag_of_Washington.svg.png'
    }, {
      'name': 'West Virginia',
      'flag': '2/22/Flag_of_West_Virginia.svg/46px-Flag_of_West_Virginia.svg.png'
    }, {
      'name': 'Wisconsin',
      'flag': '2/22/Flag_of_Wisconsin.svg/45px-Flag_of_Wisconsin.svg.png'
    }, {
      'name': 'Wyoming',
      'flag': 'b/bc/Flag_of_Wyoming.svg/43px-Flag_of_Wyoming.svg.png'
    }];

    var states = ['Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California', 'Colorado', 'Connecticut', 'Delaware', 'Florida', 'Georgia', 'Hawaii', 'Idaho', 'Illinois', 'Indiana', 'Iowa', 'Kansas', 'Kentucky', 'Louisiana', 'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota', 'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada', 'New Hampshire', 'New Jersey', 'New Mexico', 'New York', 'North Dakota', 'North Carolina', 'Ohio', 'Oklahoma', 'Oregon', 'Pennsylvania', 'Rhode Island', 'South Carolina', 'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont', 'Virginia', 'Washington', 'West Virginia', 'Wisconsin', 'Wyoming'];

    var objItems = [{
      name: 'Haki',
      joined: '2 month ago',
      email: 'Haki@email.com'
    }, {
      name: 'Ran',
      joined: '2 days ago',
      email: 'Ran123@ac.org'
    }, {
      name: 'John',
      joined: 'a week ago',
      email: 'JJ@gmail.com'
    }, {
      name: 'Mary',
      joined: 'Yesterday',
      email: 'Mary@yahoo.com'
    }, {
      name: 'Charlie',
      joined: 'Just now',
      email: 'Charlie@msn.com'
    }, {
      name: 'Rebecca',
      joined: 'Yesterday',
      email: 'Becky@mail.com'
    }, {
      name: 'James',
      joined: '3 month ago',
      email: 'James@inbox.com'
    }];

    var vm = this;
    vm.items = [];
    vm.selectedItem = "";

    vm.selectCallback = function(item) {
      $log.log(item);
    }

    vm.asyncSearchMatchesWithString = function(term) {
      var deferred = $q.defer();

      $timeout(function() {
        deferred.resolve(vm.states = states);
      }, 500);
      return deferred.promise;
    }

    vm.asyncSearchMatches1 = function(term) {
      var deferred = $q.defer();
      $timeout(function() {
        deferred.resolve(vm.statesWithFlags = statesWithFlags);
      }, 800);
      return deferred.promise;
    }

    vm.asyncSearchMatches2 = function(term) {

      var deferred = $q.defer();

      //$http.get("domain?searchTerm="+term)
      //.success(function(data){deferred.resolve(data)})
      //.error(function(deferred.reject()))
      //return deferred.promise;

      $timeout(function() {
        deferred.resolve(vm.items = objItems);
      }, 1000);
      return deferred.promise;
    }
  }
  </script>
</body>

</html>
